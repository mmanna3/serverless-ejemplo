org: mmanna3
app: aws-node-http-api-project
service: aws-node-http-api-project
frameworkVersion: '3'

provider:
  name: aws
  runtime: nodejs14.x
  region: "${opt:region, 'us-east-1'}"
  stage: "${opt:stage, 'dev'}"
  profile: ${self:custom.profiles.${sls:stage}}
  tracing:
    lambda: true
  apiGateway:
    apiKeys:      	
      - name: myApiKey
        value: my-super-secret-api-key-autogenerated
  # httpApi:
  #   cors: true
  iam:
    role:
      statements:
        - Effect: Allow
          Action: "secretsmanager:GetSecretValue"
          Resource: '*'

custom:
    profiles:
      dev: gardmanaDev
      prod: gardmanaProd

functions:
  hello:
    handler: handler.hello
    events:
      - http:
          path: /hello
          method: get
          private: true
  healthcheck:
    handler: handler.healthcheck
    events:
      - http:
          path: /healthcheck
          method: get
  secretTest:
    handler: handler.secretTest
    events:
      - http:
          path: /secret
          method: get

